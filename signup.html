<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<title>Signup | Playnex Digital</title>
<link rel="icon" href="images/favicon.png" type="image/png" />
<meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1" />
<link href="https://fonts.googleapis.com/css2?family=Poppins&family=Oswald&display=swap" rel="stylesheet" />
<style>
html, body {
  margin: 0; padding: 0; height: 100%;
  font-family: 'Poppins', sans-serif;
  background-color: #000; color: white;
  overflow: hidden;
}
* { box-sizing: border-box; }
.main-container { display: flex; width: 100%; height: 100vh; }
.form-section {
  flex: 1;
  background-color: #111;
  display: flex;
  flex-direction: column;
  align-items: center;
  overflow-y: auto;
  justify-content: flex-start;
  padding-top: 60px;
}
.form-content {
  width: 100%; max-width: 560px;
  padding: 10px 30px 60px 30px;
}
.logo { text-align: center; margin-bottom: 25px; }
.logo img { height: 30px; max-width: 100%; }
h1 { font-family: 'Oswald', sans-serif; font-weight: 600; color: #fff; text-align: center; margin-top: 10px; margin-bottom: 10px; font-size: 32px; }
p.signup-desc { text-align: center; color: rgba(255,255,255,0.7); margin-bottom: 30px; font-size: 14px; }

button.auth-btn {
  width: 100%;
  font-weight: bold;
  padding: 14px;
  border-radius: 6px;
  border: 1px solid rgba(255,255,255,0.3);
  background-color: #222;
  color: rgba(255,255,255,0.85);
  font-size: 15px;
  cursor: pointer;
  margin-bottom: 15px;
  display: flex;
  align-items: center;
  justify-content: center;
  gap: 10px;
  transition: 0.3s ease;
}
button.auth-btn:hover { background-color: #333; }

button.primary-btn {
  background-color: #00ddff;
  color: #000;
  font-weight: bold;
  padding: 14px;
  border-radius: 6px;
  border: none;
  cursor: pointer;
  font-size: 15px;
  margin-top: 15px;
  transition: 0.3s ease;
  width: 100%;
}
button.primary-btn:hover { background-color: #00c0e6; }

.back-btn {
      background: transparent;
      color: white;
      font-size: 15px;
      padding: 8px 16px;
      border-radius: 6px;
      margin-top: 0px;
      margin-bottom: 10px;
      margin-left: 0;
      border: none;
      cursor: pointer;
      transition: background 0.3s ease;
    }
    .back-btn:hover {
      background-color: rgba(255, 255, 255, 0.1);
    }

label { display: block; margin-top: 15px; font-weight: 500; }
label span.required { color: #ff4444; margin-left: 5px; }
.input-wrapper { position: relative; }
input, select {
  width: 100%; padding: 14px; margin-top: 5px;
  border-radius: 6px; border: 1px solid #444;
  background-color: #222; color: white; font-size: 14px;
}
input::placeholder { color: rgba(255, 255, 255, 0.5); }
input.invalid, select.invalid { border-color: #ff4444; }
input.valid, select.valid { border-color: white; }

.toggle-password {
  position: absolute; top: 50%; right: 10px;
  transform: translateY(-50%);
  cursor: pointer;
  background: none; border: none; padding: 0;
  height: 24px; width: 36px;
}
.toggle-password svg { width: 28px; height: 24px; stroke: rgba(255, 255, 255, 0.7); stroke-width: 2.2; fill: none; }
.toggle-password:hover svg { stroke: #fff; }
.toggle-password.active .slash { display: block; }
.slash { display: none; stroke: rgba(255,255,255,0.7); stroke-width: 2.2; }

.error-note { font-size: 13px; color: rgba(255, 68, 68, 0.9); margin-top: 5px; display: none; }
.login-link { text-align: center; margin-top: 25px; font-size: 14px; }
.login-link a { color: #00ddff; text-decoration: none; transition: 0.3s ease; }
.login-link a:hover { text-decoration: underline; }
.terms-text { font-size: 14px; color: rgba(255,255,255,0.75); text-align: center; margin-top: 40px; line-height: 1.6; }
.terms-text a { color: #4fc3f7; text-decoration: none; }
.terms-text a:hover { text-decoration: underline; }

.step { display: none; }
.step.active { display: block; animation: fadeIn 0.3s ease-in-out; }
@keyframes fadeIn { from { opacity: 0; transform: translateY(-10px);} to { opacity: 1; transform: translateY(0);} }

@media screen and (max-width: 768px) { 
  .main-container { flex-direction: column; } 
  .form-section { padding: 20px; height: 100vh; } 
  .image-section { display: none; } 
}
.image-section { flex: 1; background-color: #000; }
.image-section img { width: 100%; height: 100%; object-fit: cover; object-position: top center; }
</style>
</head>
<body>
<div class="main-container">
  <div class="form-section">
    <div class="form-content">
      <div class="logo">
        <a href="/"><img src="images/logo.png" alt="Playnex Digital Logo" /></a>
      </div>
      <h1>Create an account</h1>
      <p class="signup-desc">Join the community and start your musical journey</p>

      <!-- Auth Buttons -->
      <button type="button" id="emailStartBtn" class="auth-btn">
        <img src="https://www.svgrepo.com/show/424662/email-newsletter-subscription.svg" alt="Email Icon" width="18" /> Continue with Email
      </button>
      <button type="button" id="googleSignupBtn" class="auth-btn">
        <img src="https://www.svgrepo.com/show/355037/google.svg" alt="Google Icon" width="18" /> Continue with Google
      </button>

      <!-- Step 1 -->
      <div id="step1" class="step">
        <label for="fullName">Full Name<span class="required">*</span></label>
        <input type="text" id="fullName" placeholder="Enter your name" required />

        <label for="email">Email Address<span class="required">*</span></label>
        <input type="email" id="email" placeholder="Enter your email" required />

        <label for="password">Password<span class="required">*</span></label>
        <div class="input-wrapper">
          <input type="password" id="password" placeholder="Create a strong password" required />
          <button type="button" class="toggle-password" onclick="togglePassword('password', this)">
            <svg viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z"/>
              <line class="slash" x1="4" y1="2" x2="20" y2="22" />
            </svg>
          </button>
        </div>
        <div class="error-note" id="passwordNote">
          Password must be 6+ characters with 1 uppercase, 1 number, and 1 special character.
        </div>

        <label for="confirmPassword">Confirm Password<span class="required">*</span></label>
        <div class="input-wrapper">
          <input type="password" id="confirmPassword" placeholder="Confirm password" required />
          <button type="button" class="toggle-password" onclick="togglePassword('confirmPassword', this)">
            <svg viewBox="0 0 24 24">
              <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z"/>
              <path d="M12 8a4 4 0 1 1 0 8 4 4 0 0 1 0-8z"/>
              <line class="slash" x1="4" y1="2" x2="20" y2="22" />
            </svg>
          </button>
        </div>
        <div class="error-note" id="matchNote">Password does not match.</div>

        <button type="button" class="primary-btn" onclick="nextStep()">Next</button>
      </div>

      <!-- Step 2 -->
      <div id="step2" class="step">
<button type="button" class="back-btn" onclick="prevStep()"> Back</button>
        <label for="phone">Phone Number<span class="required">*</span></label>
        <input type="tel" id="phone" placeholder="Enter your phone number" required />

        <label for="country">Country<span class="required">*</span></label>
        <select id="country" required>
          <option value="India" selected>India</option>
        </select>

        <label for="state">State<span class="required">*</span></label>
        <select id="state" required>
          <option value="">Select State</option>
        </select>

        <label for="district">District<span class="required">*</span></label>
        <select id="district" required>
          <option value="">Select District</option>
        </select>

        <button type="submit" class="primary-btn">Sign Up</button>
      </div>

      <div class="login-link">
        Already have an account? <a href="https://dashboard.spmusiczone.com/login">Login</a>
      </div>

      <div class="terms-text">
        By signing up, you agree to our <a href="https://spmusiczone.com/terms-and-conditions" target="_blank">Terms & Conditions</a> and <a href="https://spmusiczone.com/privacy-policy" target="_blank">Privacy Policy</a>.
      </div>
    </div>
  </div>

  <div class="image-section">
    <img src="images/form-image.png" alt="Form Image" />
  </div>
</div>

<script type="module">
// Firebase
import { initializeApp } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-app.js";
import { getAuth, createUserWithEmailAndPassword, updateProfile, GoogleAuthProvider, signInWithPopup } from "https://www.gstatic.com/firebasejs/10.4.0/firebase-auth.js";

const firebaseConfig = {
  apiKey: "YOUR_API_KEY",
  authDomain: "YOUR_PROJECT_ID.firebaseapp.com",
  projectId: "YOUR_PROJECT_ID",
  storageBucket: "YOUR_PROJECT_ID.appspot.com",
  messagingSenderId: "YOUR_SENDER_ID",
  appId: "YOUR_APP_ID"
};
const app = initializeApp(firebaseConfig);
const auth = getAuth(app);
const googleProvider = new GoogleAuthProvider();

// Elements
const emailStartBtn = document.getElementById('emailStartBtn');
const step1 = document.getElementById('step1');
const step2 = document.getElementById('step2');
const googleBtn = document.getElementById('googleSignupBtn');
const password = document.getElementById('password');
const confirmPassword = document.getElementById('confirmPassword');
const passwordNote = document.getElementById('passwordNote');
const matchNote = document.getElementById('matchNote');
const email = document.getElementById('email');
const fullName = document.getElementById('fullName');

// State/District data
const statesData = { "Andhra Pradesh": ["Anantapur","Chittoor","East Godavari"], "Uttarakhand": ["Almora","Bageshwar"], "West Bengal": ["Alipurduar","Bankura"] };
const stateSelect = document.getElementById("state");
const districtSelect = document.getElementById("district");
for (let state in statesData) {
  const opt = document.createElement("option");
  opt.value = state;
  opt.textContent = state;
  stateSelect.appendChild(opt);
}
stateSelect.addEventListener("change", () => {
  districtSelect.innerHTML = '<option value="">Select District</option>';
  (statesData[stateSelect.value] || []).forEach(d => {
    const opt = document.createElement("option");
    opt.value = d;
    opt.textContent = d;
    districtSelect.appendChild(opt);
  });
});

// Show Email Form
emailStartBtn.addEventListener('click', () => {
  step1.classList.add('active');
  emailStartBtn.style.display = 'none';
  googleBtn.style.display = 'none';
});

// Validation
function validateField(input) {
  const val = input.value.trim();
  if (!val) {
    input.classList.add('invalid');
    input.classList.remove('valid');
    return false;
  }
  input.classList.remove('invalid');
  input.classList.add('valid');
  if (input.id === 'email') {
    const validEmail = /^[^\s@]+@[^\s@]+\.[^\s@]{2,}$/.test(val);
    input.classList.toggle('invalid', !validEmail);
    input.classList.toggle('valid', validEmail);
    return validEmail;
  }
  if (input.id === 'password') {
    const strong = /^(?=.*[A-Z])(?=.*\d)(?=.*[^a-zA-Z0-9]).{6,}$/;
    const validPass = strong.test(val);
    passwordNote.style.display = validPass ? 'none' : 'block';
    return validPass;
  }
  if (input.id === 'confirmPassword') {
    const match = val === password.value && val !== '';
    matchNote.style.display = match ? 'none' : 'block';
    return match;
  }
  return true;
}

function togglePassword(id, btn) {
  const field = document.getElementById(id);
  const isVisible = field.type === 'text';
  field.type = isVisible ? 'password' : 'text';
  btn.classList.toggle('active', !isVisible);
}

function nextStep() {
      let valid = true;
      step1Inputs.forEach(input => {
        validateField(input);
        if (input.classList.contains('invalid')) valid = false;
      });
      if (valid) {
        document.getElementById('step1').classList.remove('active');
        document.getElementById('step2').classList.add('active');
      }
    }

    function prevStep() {
      document.getElementById('step2').classList.remove('active');
      document.getElementById('step1').classList.add('active');
    }

window.togglePassword = togglePassword;

// Step navigation
window.nextStep = function() {
  if (validateField(fullName) & validateField(email) & validateField(password) & validateField(confirmPassword)) {
    step1.classList.remove('active');
    step2.classList.add('active');
  }
}

// Google Auth
googleBtn.addEventListener('click', async () => {
  try {
    const result = await signInWithPopup(auth, googleProvider);
    if (result.user) window.location.href = "https://dashboard.spmusiczone.com";
  } catch (err) { alert(err.message); }
});
</script>
</body>
</html>
